function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=t.parcelRequirea837;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){o[e]=t},t.parcelRequirea837=i),i("kyEFX").register(JSON.parse('{"kROXL":"index.86ee6af9.js","lp5u4":"sprite.ff7a874f.svg","5UbS1":"index.9cac39be.css","8DJw5":"shoppingList.8f997ecd.js"}'));var a=i("2sKPt");function r(e){const{book_image:t,title:n,author:o,_id:i}=e;return`\n    <li class="cards-item">\n      <a class="cards-link" href="#" data-id="${i}">\n        <div class="cards-header card-wrapper" data-id="${i}">\n          <img class="cards-img" src="${t}" alt="${n}" loading="lazy" data-id="${i}" />\n          <p class="hover-text-card">quick view</p>\n        </div>\n        <div class="cards-content">\n          <h2 class="cards-title" data-id="${i}">${n}</h2>\n          <p class="cards-author">${o}</p>    \n        </div>\n         \n      </a>\n    </li>`}a=i("2sKPt");function s(e){const{list_name:t,books:n}=e;return`\n      <ul class="best-book-list">\n        <li class="book-item">\n          <h3 class="book-title">${t}</h3> \n          <ul class="book-info">${n.map((({title:e,author:t,book_image:n,_id:o})=>`\n        <li class="card-item">\n          <button type="button" data-id=${o} class="card-wrapper-btn">\n            <div loading="lazy" data-id=${o} class="book-image" style="background-image: url(${n})"></div>\n            <p class="hover-text">quick view</p>\n          </button>\n          <h4 class="book-subtitle" data-id=${o}>${e}</h4>\n          <p class="book-autor">${t}</p>\n        </li>\n      `)).join("")}</ul>\n          <button type="button" class="more-btn" data-listname="${t}">see more</button>\n        </li>\n      </ul>\n  `}function c(e,t){return`<div class="container grid-wrapper">\n      <h2 class="bestsellers-title dark-theme">\n        Best Sellers <span class="bestsellers-title-accent">Books</span>\n      </h2>${e.map((({list_name:e,books:n})=>({list_name:e,books:n.slice(0,t)}))).map(s).join("")}`}const l=document.querySelector(".cont-section"),d=document.querySelector(".loader-inner"),u=new(0,a.FetchBook);let f;async function m(e){try{d.style.display="flex",l.innerHTML="";!function(e,t){const n=c(e,t);l.insertAdjacentHTML("beforeend",n)}(await u.fetchElement("/top-books"),e)}catch(e){console.log(e)}finally{d.style.display="none"}}function v(){const e=window.innerWidth;l.addEventListener("click",(function(e){k(e.target.dataset.listname)})),f&&clearTimeout(f),f=setTimeout((()=>{window.removeEventListener("resize",v),m(e>=1440?5:e>=768?3:1),window.addEventListener("resize",v)}),300)}v(),window.addEventListener("resize",v);const p=document.querySelector(".aside-list"),h=document.querySelector(".cont-section"),g=document.querySelector(".categories-list-name"),y=document.querySelector(".loader-inner"),b=new(0,a.FetchBook);function w(e){e.preventDefault();const{target:t}=e;if(!t.classList.contains("aside-link"))return;L(e),g.classList.remove("activ-name");document.querySelectorAll(".aside-link").forEach((e=>{e.classList.remove("activ-name")})),t.classList.add("activ-name");k(t.textContent)}function k(e){!function(e){const t=document.querySelectorAll(".aside-link");g.classList.remove("activ-name"),t.forEach((t=>{t.classList.remove("activ-name"),t.textContent===e&&t.classList.add("activ-name")}))}(e),y.style.display="flex",b.fetchElement(`/category?category=${e}`).then((t=>{!function(e,t){const n=t.split(" "),o=n[n.length-1],i=document.createElement("span");i.textContent=o,i.style.color="#4F2EE8";const a=t.replace(o,i.outerHTML);h.innerHTML=`<div class="container grid-wrapper">\n  <h1 class="books-section-title" id="section-title"">${a}</h1>\n  <ul class="card-list">${e}</ul>\n  </div>`}
//! --------------------
(t.map((e=>r(e))).join(""),e)})).catch((e=>{console.warn(e)})).finally((()=>{y.style.display="none"}))}function L(e){const t=document.querySelector("#"+e.target.dataset.scroll).offsetTop;window.scrollTo({top:t,behavior:"smooth"})}p.addEventListener("click",w),g.addEventListener("click",(e=>{document.querySelectorAll(".aside-link").forEach((e=>{e.classList.remove("activ-name")})),e.target.classList.add("activ-name"),v(),L(e)})),b.fetchElement("/category-list").then((e=>{const t=e.map((e=>function({list_name:e}){return`\n      <li class="aside-item">\n        <a class="aside-link" href="#" data-scroll="section-title">${e}</a>\n      </li>`}(e))).join("");var n;n=t,p.insertAdjacentHTML("beforeend",n)})).catch((e=>{console.warn(e)})),i("gQXit"),i("ecGnp");const E=document.querySelector("[data-order-close]"),S=document.querySelector("[data-order-backdrop]"),$=document.querySelector(".modal-close-icon");let T=0;function _(e){const t=e.target!==S,n=e.target!==E,o="Escape"!==e.code,i=e.target!==$,a=e.target.parentNode!==$;document.body.style.overflow="auto";t&&n&&o&&i&&a||(S.classList.add("is-hidden"),document.body.classList.remove("modal-open"),window.removeEventListener("keydown",j),E.removeEventListener("click",_),S.removeEventListener("click",_),$.removeEventListener("click",_),document.body.classList.contains("modal-open")||window.scrollTo({top:T,behavior:"instant"}))}function j(e){"Escape"===e.code&&_(e)}window.addEventListener("scroll",(function(e){document.body.classList.contains("modal-open")||(T=window.pageYOffset)}));var q;a=i("2sKPt");q=new URL(i("kyEFX").resolve("lp5u4"),import.meta.url).toString();const x=new(0,a.FetchBook),O=document.querySelector(".modal-wrapper"),H=document.querySelector(".cont-section");document.querySelector(".backdrop");function A(e){let t=JSON.parse(localStorage.getItem("bookList"));const n=document.querySelector(".btn-container");if(Array.isArray(t)&&t||(t=[]),t.includes(e)){n.innerHTML=function(e){return`<button class="modal-active-btn js-removeBtn" data-id="${e}">\n      remove from the shopping list\n    </button>\n    <p class="modal-congratulations-text">\n      Сongratulations! You have added the book to the shopping list. To delete,\n      press the button “Remove from the shopping list”.\n    </p>`}(e);document.querySelector(".js-removeBtn").addEventListener("click",(function n(o){localStorage.setItem("bookList",JSON.stringify(t.filter((t=>t!==e)))),A(e),o.currentTarget.removeEventListener("click",n)}))}else{n.innerHTML=function(e){return`<button class="modal-active-btn-add js-addBtn" data-id="${e}">\n      add to shopping list\n    </button>`}(e);document.querySelector(".js-addBtn").addEventListener("click",(function n(o){t.push(e),localStorage.setItem("bookList",JSON.stringify(t)),A(e),o.currentTarget.removeEventListener("click",n)}))}}H.addEventListener("click",(async function(t){if(t.preventDefault(),!t.target.dataset.id)return;S.classList.remove("is-hidden"),document.body.classList.add("modal-open"),window.addEventListener("keydown",j),E.addEventListener("click",_),S.addEventListener("click",_),$.addEventListener("click",_),document.body.style.overflow="hidden",document.body.classList.contains("modal-open")||(T=window.pageYOffset);const n=await x.fetchElement(`/${t.target.dataset.id}`),{book_image:o,title:i,author:a,description:r}=n,{url:s}=n.buy_links[0],{url:c}=n.buy_links[1],{url:l}=n.buy_links[4],d=`<img\n          class="modal-image"\n          src="${o}"\n          alt=""\n      />\n      <ul class="modal-list">\n        <li><h2 class="modal-list-title">${i}</h2></li>\n        <li><h3 class="modal-list-autor">${a}</h3></li>\n        <li>\n          <p class="modal-description">\n            ${r}\n          </p>\n        </li>\n        <div class="modal-shop-icons">\n          <li class="modal-center-icons">\n          <a href="${s}" target="_blank" rel="noopener nofollow noreferrer"><svg class="modal-shop-item" width="62" height="19">\n              <use href="${e(q)}#icon-amazon"  width="62" height="19"></use>\n            </svg></a>\n          </li>\n          <li class="modal-center-icons">\n             <a href="${c}" target="_blank" rel="noopener nofollow noreferrer"><svg class="modal-shop-item" width="33" height="32">\n              <use href="${e(q)}#icon-apple-books-logo" width="33" height="32"></use>\n            </svg></a>\n          </li>\n          <li class="modal-center-icons">\n             <a href="${l}" target="_blank" rel="noopener nofollow noreferrer"><svg class="modal-shop-item" width="38" height="36">\n              <use href="${e(q)}#icon-book-shops-logo" width="38" height="36"></use>\n            </svg></a>\n          </li>\n            </div>\n      </ul>`;O.innerHTML=d,A(t.target.dataset.id)}));const F=document.querySelectorAll(".menu-link");F.forEach((e=>e.classList.remove("activ-page"))),F[0].classList.add("activ-page");const M=document.querySelectorAll(".mob-menu-link");M.forEach((e=>e.classList.remove("activ-page"))),M[0].classList.add("activ-page"),i("iiT47");var N,B={},R={};R=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var z,D={},J={};z="object"==typeof t&&t&&t.Object===Object&&t;var U="object"==typeof self&&self&&self.Object===Object&&self,C=z||U||Function("return this")();D=function(){return J.Date.now()};var I={},P={},W={},X=/\s/;W=function(e){for(var t=e.length;t--&&X.test(e.charAt(t)););return t};var Y=/^\s+/;P=function(e){return e?e.slice(0,W(e)+1).replace(Y,""):e};var K,G={},Q={};K=(J=C).Symbol;var V={},Z=Object.prototype,ee=Z.hasOwnProperty,te=Z.toString,ne=K?K.toStringTag:void 0;V=function(e){var t=ee.call(e,ne),n=e[ne];try{e[ne]=void 0;var o=!0}catch(e){}var i=te.call(e);return o&&(t?e[ne]=n:delete e[ne]),i};var oe={},ie=Object.prototype.toString;oe=function(e){return ie.call(e)};var ae=K?K.toStringTag:void 0;Q=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ae&&ae in Object(e)?V(e):oe(e)};var re={};re=function(e){return null!=e&&"object"==typeof e};G=function(e){return"symbol"==typeof e||re(e)&&"[object Symbol]"==Q(e)};var se=/^[-+]0x[0-9a-f]+$/i,ce=/^0b[01]+$/i,le=/^0o[0-7]+$/i,de=parseInt;I=function(e){if("number"==typeof e)return e;if(G(e))return NaN;if(R(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=R(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=P(e);var n=ce.test(e);return n||le.test(e)?de(e.slice(2),n?2:8):se.test(e)?NaN:+e};var ue=Math.max,fe=Math.min;B=function(e,t,n){var o,i,a,r,s,c,l=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var n=o,a=i;return o=i=void 0,l=t,r=e.apply(a,n)}function v(e){return l=e,s=setTimeout(h,t),d?m(e):r}function p(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=a}function h(){var e=D();if(p(e))return g(e);s=setTimeout(h,function(e){var n=t-(e-c);return u?fe(n,a-(e-l)):n}(e))}function g(e){return s=void 0,f&&o?m(e):(o=i=void 0,r)}function y(){var e=D(),n=p(e);if(o=arguments,i=this,c=e,n){if(void 0===s)return v(c);if(u)return clearTimeout(s),s=setTimeout(h,t),m(c)}return void 0===s&&(s=setTimeout(h,t)),r}return t=I(t)||0,R(n)&&(d=!!n.leading,a=(u="maxWait"in n)?ue(I(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,o=c=i=s=void 0},y.flush=function(){return void 0===s?r:g(D())},y};N=function(e,t,n){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return R(n)&&(o="leading"in n?!!n.leading:o,i="trailing"in n?!!n.trailing:i),B(e,t,{leading:o,maxWait:t,trailing:i})};const me=document.querySelector(".scroll-to-top"),ve=e(N)((function(){const e=window.scrollY,t=document.documentElement.clientHeight;function n(){window.scrollTo({top:0,behavior:"smooth"})}e>=t?(me.addEventListener("click",n),me.classList.remove("unvisually")):(me.classList.add("unvisually"),me.addEventListener("click",n))}),500);window.addEventListener("scroll",ve);
//# sourceMappingURL=index.86ee6af9.js.map
