{"mappings":"kpBAsBA,IAAAA,EACAC,E,iJArBA,IAAIC,EAAU,GAoBdF,EAlBA,SAAkBG,GAGhB,IAFA,IAAIC,EAAOC,OAAOD,KAAKD,GAEdG,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAC/BJ,EAAQE,EAAKE,IAAMH,EAAMC,EAAKE,G,EAelCL,EAXA,SAAiBO,GACf,IAAIC,EAAWP,EAAQM,GAEvB,GAAgB,MAAZC,EACF,MAAM,IAAIC,MAAM,oCAAsCF,GAGxD,OAAOC,C,KCnBTE,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,kQCAzDH,EAAA,S,4BCAAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCGrF,SAASC,EAAiBC,GAC/B,MAAMC,IACJA,EAAGC,WACHA,EAAUC,UACVA,EAASC,MACTA,EAAKC,YACLA,EAAWC,OACXA,EACAC,WACEC,EACAC,EACAC,EACAC,EACAC,EACAC,IAEAb,EA+BJ,MA9BqB,qBACNC,oIAIFC,6BACSE,2GAGuBA,0DACED,4DACGE,GAAe,4EACpBC,+FAERE,EAAOX,0FACoCiB,EAAAtB,sFAE3CiB,EAAYZ,yFAC8BiB,EAAAtB,gGAE1CoB,EAASf,4FACoCiB,EAAAtB,mGAGzDS,6HAC4Da,EAAAtB,mF,CAOhF,SAASuB,EAAkBC,GAChC,IAAIC,EACJ,GAA4B,IAAxBD,EAAahC,OACfiC,EAASC,QACJ,CAELD,EAAS,iMADWD,EAAaG,KAAK,oB,CAOxC,OAAOF,C,CAGF,SAASC,IACd,MAAO,+WAKuCJ,EAAAM,8D,CCzEhDA,EAAiB,IAAA3B,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,iBHU5F,MAAMuB,EAAcC,SAASC,iBAAiB,kBAC9CF,EAAYG,SAAQC,GAAMA,EAAGC,UAAUC,OAAO,gBAC9CN,EAAY,GAAGK,UAAUE,IAAI,cAE7B,MAAMC,EAAYP,SAASC,iBAAiB,cAC5CM,EAAUL,SAAQC,GAAMA,EAAGC,UAAUC,OAAO,gBAC5CE,EAAU,GAAGH,UAAUE,IAAI,cAE3B,MAAME,EAAYR,SAASS,cAAc,iBACnCC,EAAiB,GAoBhB,SAASC,EAAcC,GAC5B,MAAMC,EAAU,IAAIb,SAASC,iBAAiB,aACxCa,EAAe9C,KAAKC,MAAM8C,aAAaC,QAAQ,cAAgB,KAC/DC,EAAiBL,EAAMM,OAAOC,QAAQxD,GACtCyD,EAAUN,EAAaO,QAAQJ,GACrCK,QAAQC,IAAIH,IACI,IAAZA,IACFN,EAAaU,OAAOJ,EAAS,GAC7BL,aAAaU,QAAQ,WAAYzD,KAAK0D,UAAUZ,IAChDD,EAAQc,MAAKxB,GAAMA,EAAGgB,QAAQxD,KAAOsD,IAAgBZ,UAE3B,IAAxBS,EAAapD,SACf8C,EAAUoB,UAAYhC,I,CA/BFiC,OAAMjB,IAC5B,MAAME,EAAe9C,KAAKC,MAAM8C,aAAaC,QAAQ,cAAgB,KAErE,IAAK,MAAMc,KAAQhB,EAAc,CAC/B,MACMiB,EAAatD,QADI,IAAI,EAAAuD,EAAAC,YAAYC,aAAaJ,IAEpDpB,EAAeyB,KAAKJ,E,CAKtB,GAFAvB,EAAUoB,UAAYnC,EAAkBiB,GAEZ,IAAxBI,EAAapD,OAAc,CAChBsC,SAASS,cAAc,kBAC/B2B,iBAAiB,QAASzB,E,GAInC0B","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-9c5ae02622d477d0.js","src/scripts/shoppingList.js","node_modules/@parcel/runtime-js/lib/runtime-643dfc921be0cb37.js","src/scripts/shoping-list-markup.js","node_modules/@parcel/runtime-js/lib/runtime-999a314fa150c2b4.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"l057C\\\":\\\"shoppingList.960c660d.js\\\",\\\"lp5u4\\\":\\\"sprite.ff7a874f.svg\\\",\\\"3uQue\\\":\\\"empty-cont-img.fd3db3d5.png\\\",\\\"5UbS1\\\":\\\"index.9cac39be.css\\\",\\\"8DJw5\\\":\\\"shoppingList.8f997ecd.js\\\"}\"));","import './changeTheam';\nimport './mobile-menu';\nimport './support';\nimport {\n  createBookMarkup,\n  createEmptyBackground,\n  createShopingList,\n} from './shoping-list-markup';\nimport { FetchBook } from './api';\n\nconst mobileLinks = document.querySelectorAll('.mob-menu-link');\nmobileLinks.forEach(el => el.classList.remove('activ-page'));\nmobileLinks[1].classList.add('activ-page');\n\nconst menuLinks = document.querySelectorAll('.menu-link');\nmenuLinks.forEach(el => el.classList.remove('activ-page'));\nmenuLinks[1].classList.add('activ-page');\n\nconst container = document.querySelector('.cont-section');\nconst bookMarkupsArr = [];\nconst onShoppingClick = async event => {\n  const booksInChart = JSON.parse(localStorage.getItem('bookList')) || null;\n\n  for (const book of booksInChart) {\n    const bookData = await new FetchBook().fetchElement(book);\n    const bookMarkup = createBookMarkup(bookData);\n    bookMarkupsArr.push(bookMarkup);\n  }\n\n  container.innerHTML = createShopingList(bookMarkupsArr);\n\n  if (booksInChart.length !== 0) {\n    const ulSL = document.querySelector('.shopping-list');\n    ulSL.addEventListener('click', onDeleteClick);\n  }\n};\n\nonShoppingClick();\n\nexport function onDeleteClick(event) {\n  const allLiEl = [...document.querySelectorAll('.li-item')];\n  const booksInChart = JSON.parse(localStorage.getItem('bookList')) || null;\n  const deletingBookId = event.target.dataset.id;\n  const bookIdx = booksInChart.indexOf(deletingBookId);\n  console.log(bookIdx);\n  if (bookIdx !== -1) {\n    booksInChart.splice(bookIdx, 1);\n    localStorage.setItem('bookList', JSON.stringify(booksInChart));\n    allLiEl.find(el => el.dataset.id === deletingBookId).remove();\n  }\n  if (booksInChart.length === 0) {\n    container.innerHTML = createEmptyBackground();\n  }\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"lp5u4\")).toString();","import iconsSL from '../images/sprite.svg';\nimport emptyImage from '../images/empty-cont-img.png';\n\nexport function createBookMarkup(object) {\n  const {\n    _id,\n    book_image,\n    list_name,\n    title,\n    description,\n    author,\n    buy_links: [\n      amazon,\n      apple_books,\n      barnes,\n      books_a_million,\n      bookshop,\n      indie_bound,\n    ],\n  } = object;\n  const markupOfBook = ` \n  <li data-id=\"${_id}\" class=\"li-item\">\n    <div class=\"shopping-list-book-item\">\n      <img\n        class=\"shopping-list-book-img\"\n        src=\"${book_image}\"\n        alt=\"Image of ${title}\"\n      />\n      <div class=\"shopping-list-book-text\">\n        <h2 class=\"shopping-list-book-title\">${title}</h2>\n        <p class=\"shopping-list-book-category\">${list_name}</p>\n        <p class=\"shopping-list-book-description\">${description || 'Description is empty'}</p>\n        <p class=\"shopping-list-book-author\">${author}</p>\n        <div class=\"shopping-list-book-links\">\n          <a class=\"test-link\" href=\"${amazon.url}\">\n            <svg width=\"32\" height=\"11\" class=\"shopping-list-amazon\"><use href=\"${iconsSL}#icon-amazon\"></use></svg>\n          </a>\n          <a class=\"test-link\" href=\"${apple_books.url}\">\n            <svg width=\"16\" height=\"16\" class=\"shopping-list-apple\"><use href=\"${iconsSL}#icon-apple-books-logo\"></use></svg>\n          </a>\n          <a class=\"test-link\" href=\"${bookshop.url}\">\n            <svg width=\"16\" height=\"16\" class=\"shopping-list-bookshop\"><use href=\"${iconsSL}#icon-book-shops-logo\"></use></svg>\n          </a>\n        </div>\n        <button data-id=\"${_id}\" class=\"shopping-list-book-btn\" >\n          <svg class=\"shopping-list-book-btn-icon\" width=\"16\" height=\"16\"><use href=\"${iconsSL}#icon-trash\"></use></svg>\n        </button>\n      </div>\n    </div>\n  </li>`;\n  return markupOfBook;\n}\nexport function createShopingList(arrayOfBooks) {\n  let result;\n  if (arrayOfBooks.length === 0) {\n    result = createEmptyBackground();\n  } else {\n    const mappedBooks = arrayOfBooks.join('');\n    result = `\n  <div class=\"container grid-wrapper shopping-list-container\">\n    <h2 class=\"shop-list-title\">Shopping <span class=\"shop-list-title-span\">List</span></h2>\n    <ul class=\"shopping-list\">${mappedBooks}</ul>\n  </div>`;\n  }\n  return result;\n}\n\nexport function createEmptyBackground() {\n  return `\n    <div class=\"container grid-wrapper shopping-list-container\">\n      <h2 class=\"shop-list-title\">Shopping <span class=\"shop-list-title-span\">List</span></h2>\n      <div class=\"shop-list-empty-container\">\n        <p class=\"shop-list-empty-paragraph\">This page is empty, add some books and proceed to order.</p>\n        <img class=\"shop-list-empty-img\" src=\"${emptyImage}\" alt=\"Books in empty section\"/>\n      </div>\n    </div>`;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3uQue\")).toString();"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$a4212a039eccdb43$exports","URL","resolve","import","meta","url","toString","$944b2f904a1690a6$export$fc330cc8afb2a391","object","_id","book_image","list_name","title","description","author","buy_links","amazon","apple_books","barnes","books_a_million","bookshop","indie_bound","$parcel$interopDefault","$944b2f904a1690a6$export$ad39da64d7b41c1c","arrayOfBooks","result","$944b2f904a1690a6$export$a85f9d8bc968d208","join","$0bc309480b737655$exports","$cf846953c7c216d5$var$mobileLinks","document","querySelectorAll","forEach","el","classList","remove","add","$cf846953c7c216d5$var$menuLinks","$cf846953c7c216d5$var$container","querySelector","$cf846953c7c216d5$var$bookMarkupsArr","$cf846953c7c216d5$export$67beccfec6229ce1","event","allLiEl","booksInChart","localStorage","getItem","deletingBookId","target","dataset","bookIdx","indexOf","console","log","splice","setItem","stringify","find","innerHTML","async","book","bookMarkup","$2sKPt","FetchBook","fetchElement","push","addEventListener","$cf846953c7c216d5$var$onShoppingClick"],"version":3,"file":"shoppingList.960c660d.js.map"}